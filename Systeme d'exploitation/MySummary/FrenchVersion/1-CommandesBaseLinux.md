# Guide des Commandes Linux

## 1. Navigation et Système de Fichiers

### Opérations sur les Répertoires

- `pwd` (Print Working Directory) - Afficher le répertoire de travail actuel

  - Exemple : `pwd` → Affiche `/home/utilisateur/documents`

- `cd` (Change Directory) - Changer de répertoire

  - `cd ..` - Remonter d'un niveau (de documents à utilisateur)
  - `cd ~` - Aller au répertoire personnel
  - `cd documents` - Entrer dans le dossier documents
  - `cd /home/utilisateur/documents` - Aller à un emplacement spécifique
  - Exemple de structure de chemin :
    ```
    /home/utilisateur/
        ├── documents/
        ├── téléchargements/
        └── images/
    ```

- `ls` - Lister les fichiers et dossiers
  - `ls` - Liste de base
  - `ls -l` - Liste détaillée (montre les permissions, la taille, la date)
  - `ls -a` - Afficher les fichiers cachés (fichiers commençant par .)
  - `ls -i` - Afficher le numéro d'inode (l'identifiant du fichier)
  - Exemple :
    ```bash
    $ ls -l
    drwxr-xr-x 2 utilisateur utilisateur 4096 Déc 8 10:00 documents
    -rw-r--r-- 1 utilisateur utilisateur  123 Déc 8 09:55 note.txt
    ```

### Opérations sur les Fichiers

- `touch` - Créer un fichier vide

  - Exemple : `touch monfichier.txt`

- `mkdir` - Créer un répertoire

  - Exemple : `mkdir mon_dossier`

- `rmdir` - Supprimer un répertoire vide

  - Exemple : `rmdir mon_dossier_vide`

- `cp` - Copier des fichiers/répertoires

  - Exemple : `cp fichier.txt fichier_sauvegarde.txt`
  - Copier un dossier : `cp -r dossier dossier_sauvegarde`

- `mv` - Déplacer ou renommer des fichiers

  - Déplacer : `mv fichier.txt documents/`
  - Renommer : `mv ancien_nom.txt nouveau_nom.txt`

- `rm` - Supprimer des fichiers
  - Supprimer un fichier : `rm fichier.txt`
  - Supprimer un dossier : `rm -r dossier`
  - Suppression forcée : `rm -rf dossier` (attention !)

## 2. Contenu des Fichiers

### Lecture des Fichiers

- `cat` - Afficher le contenu d'un fichier

  - Afficher : `cat fichier.txt`
  - Combiner des fichiers : `cat fichier1.txt fichier2.txt > combiné.txt`
  - Ajouter à un fichier : `cat fichier1.txt >> fichier2.txt`

- `head` - Afficher les 10 premières lignes

  - Exemple : `head fichier.txt`
  - Afficher 5 lignes : `head -n 5 fichier.txt`

- `tail` - Afficher les 10 dernières lignes

  - Exemple : `tail fichier.txt`
  - Afficher les 5 dernières lignes : `tail -n 5 fichier.txt`

## 3. Permissions des Fichiers

### Gestion des Propriétaires et des Permissions

- `chmod` - Modifier les permissions d'un fichier/répertoire (Change Mode)

  - Rendre un fichier exécutable : `chmod +x script.sh`
  - Donner toutes les permissions : `chmod 777 fichier.txt`

  ```bash
  Nombres de permission :
  4 = lecture (r)
  2 = écriture (w)
  1 = exécution (x)
  Exemple : chmod 755 fichier.txt
  7 (rwx) pour le propriétaire
  5 (r-x) pour le groupe
  5 (r-x) pour les autres
  ```

- `chown` - Changer le propriétaire d'un fichier/répertoire (Change Owner)

  - Changer le propriétaire : `chown utilisateur fichier.txt`
  - Changer propriétaire et groupe : `chown utilisateur:groupe fichier.txt`
  - Changement récursif : `chown -R utilisateur:groupe repertoire/`
  - Exemple :
    ```bash
    # Changer le propriétaire du fichier pour 'jean'
    $ chown jean rapport.txt
    # Changer propriétaire et groupe pour tout le répertoire
    $ chown -R jean:developpeurs projet/
    ```

- `chgrp` - Changer le groupe d'un fichier/répertoire (Change Group)

  - Changer le groupe : `chgrp nomgroupe fichier.txt`
  - Changement récursif : `chgrp -R nomgroupe repertoire/`
  - Exemple :
    ```bash
    # Changer le groupe du fichier pour 'developpeurs'
    $ chgrp developpeurs projet.txt
    # Changer le groupe pour tous les fichiers du répertoire
    $ chgrp -R developpeurs documents/
    ```

- `umask` - Définit les permissions par défaut pour les nouveaux fichiers et répertoires

  Fonctionne en masquant (soustrayant) les permissions d'une valeur de base :

- Pour les fichiers : Permission de base est 666 (rw-rw-rw-)
- Pour les répertoires : Permission de base est 777 (rwxrwxrwx)

#### Fonctionnement de umask :

1. La valeur umask est soustraite des permissions de base
2. Valeurs umask courantes :
   - `022` : La plus commune sur les systèmes Linux
   - `002` : Courante dans les environnements collaboratifs
   - `077` : Très restrictive, pour les environnements sensibles à la sécurité

#### Exemples :

Avec umask 022 :

```bash
Permission de base fichier : 666 (rw-rw-rw-)
Valeur umask :             022 (----w--w-)
                          ───
Permission résultante :    644 (rw-r--r--)

Permission de base répertoire : 777 (rwxrwxrwx)
Valeur umask :                 022 (----w--w-)
                              ───
Permission résultante :        755 (rwxr-xr-x)
```

Avec umask 002 :

```bash
Permission de base fichier : 666 (rw-rw-rw-)
Valeur umask :             002 (------w--)
                          ───
Permission résultante :    664 (rw-rw-r--)

Permission de base répertoire : 777 (rwxrwxrwx)
Valeur umask :                 002 (------w--)
                              ───
Permission résultante :        775 (rwxrwxr-x)
```

#### Utilisation Courante :

```bash
# Voir l'umask actuel
$ umask
0022

# Définir une nouvelle valeur umask
$ umask 002

# Créer des fichiers test pour voir l'effet
$ touch fichierteste
$ mkdir repertoiretest
$ ls -l
total 4
drwxrwxr-x 2 utilisateur groupe 4096 Dec 9 14:00 repertoiretest
-rw-rw-r-- 1 utilisateur groupe    0 Dec 9 14:00 fichierteste
```

### Points Clés :

- `chmod` change les permissions
- `chown` change le propriétaire du fichier/répertoire
- `chgrp` change le groupe du fichier/répertoire
- `umask` définit les permissions par défaut à la création

## 4. Commandes Texte Utiles

- `wc` - Compter des éléments dans un fichier (Word Count)

  - Syntaxe de base : `wc [options] nomfichier`
  - Options courantes :
    - `wc nomfichier` - Affiche lignes, mots et caractères
    - `wc -l nomfichier` - Compte uniquement les lignes
    - `wc -w nomfichier` - Compte uniquement les mots
    - `wc -c nomfichier` - Compte uniquement les caractères
  - Exemple :
    ```bash
    $ echo "bonjour monde" > salutation.txt
    $ wc salutation.txt
    1 2 13 salutation.txt
    # Signifie : 1 ligne, 2 mots, 13 caractères
    ```

- `cut` - Obtenir des parties de chaque ligne

  - Syntaxe de base : `cut [options] nomfichier`
  - Couper par position de caractère :
    - `cut -c 1 nomfichier` - Obtenir premier caractère
    - `cut -c 1-3 nomfichier` - Obtenir trois premiers caractères
    - `cut -c 2- nomfichier` - Obtenir du second caractère jusqu'à la fin
  - Couper par délimiteur (espace, tabulation, etc.) :
    - `cut -d " " -f 1 nomfichier` - Obtenir premier mot (séparé par espace)
    - `cut -d " " -f 2 nomfichier` - Obtenir deuxième mot
    - `-d` définit le délimiteur (ce qui sépare les champs)
    - `-f` sélectionne quels champs afficher
  - Exemples :
    ```bash
    $ echo "bonjour monde aujourd'hui" > mots.txt
    # Obtenir par position de caractère
    $ cut -c 1-3 mots.txt
    bon
    # Obtenir par position de mot (séparé par espace)
    $ cut -d " " -f 1 mots.txt
    bonjour
    $ cut -d " " -f 2 mots.txt
    monde
    ```

- `grep` - Rechercher du texte dans des fichiers

  - Syntaxe de base : `grep [options] "motif" nomfichier`
  - Options courantes :
    - `grep "mot" nomfichier` - Trouver les lignes contenant "mot"
    - `grep -i "mot" nomfichier` - Trouver "mot" (ignore majuscules/minuscules)
    - `grep -n "mot" nomfichier` - Afficher les numéros de ligne
    - `grep -v "mot" nomfichier` - Afficher les lignes qui N'ONT PAS "mot"
    - `grep -r "mot" repertoire/` - Chercher récursivement dans tous les fichiers
    - `grep -l "mot" *` - Afficher uniquement les noms de fichiers avec correspondances
  - Motifs de recherche :
    - `grep "^mot" nomfichier` - Lignes commençant par "mot"
    - `grep "mot$" nomfichier` - Lignes finissant par "mot"
    - `grep "mot.*autre" nomfichier` - "mot" suivi de "autre"
    - `grep "[0-9]" nomfichier` - N'importe quel chiffre
    - `grep "[a-zA-Z]" nomfichier` - N'importe quelle lettre
  - Exemples :

    ```bash
    $ echo "Bonjour Monde" > salutation.txt
    $ echo "bonjour ami" >> salutation.txt
    $ echo "Au revoir Monde" >> salutation.txt
    $ echo "123 test" >> salutation.txt

    # Trouver correspondance exacte
    $ grep "Bonjour" salutation.txt
    Bonjour Monde

    # Trouver en ignorant la casse
    $ grep -i "bonjour" salutation.txt
    Bonjour Monde
    bonjour ami

    # Afficher numéros de ligne
    $ grep -n "Bonjour" salutation.txt
    1:Bonjour Monde

    # Afficher lignes excluant la correspondance
    $ grep -v "ami" salutation.txt
    Bonjour Monde
    Au revoir Monde
    123 test

    # Lignes commençant par "Bonjour"
    $ grep "^Bonjour" salutation.txt
    Bonjour Monde

    # Lignes finissant par "Monde"
    $ grep "Monde$" salutation.txt
    Bonjour Monde
    Au revoir Monde

    # Lignes contenant des chiffres
    $ grep "[0-9]" salutation.txt
    123 test
    ```

- `find` - Rechercher des fichiers dans la hiérarchie des répertoires

  - Recherche par nom :
    - `find . -name "*.txt"` - Trouver les fichiers correspondant au motif
    - `find . -iname "*.txt"` - Trouver les fichiers correspondant au motif (ignore la casse)
  - Recherche par type :
    - `find . -type d` - Trouver les répertoires
    - `find . -type f` - Trouver les fichiers ordinaires
  - Recherche par propriétaire : `find . -user nomutilisateur`
  - Recherche par taille :
    - `find . -size +10M` - Fichiers plus grands que 10 Mo
    - `find . -size -10M` - Fichiers plus petits que 10 Mo
  - Exemple :

    ```bash
    # Trouver tous les fichiers PDF (ignore la casse) dans le répertoire courant
    $ find . -iname "*.pdf"
    ./documents/Rapport.PDF
    ./backup/ancien.pdf

    # Trouver les gros fichiers appartenant à l'utilisateur courant
    $ find . -user $(whoami) -size +100M
    ./videos/film.mp4
    ```

## 5. Correspondance de Motifs (Globbing) avec Exemples

**Globbing** (correspondance avec jokers) utilisé dans les commandes shell comme `ls`, `find`, `rm`, `touch` etc. :

**Note :** grep utilise les **regex** (expressions régulières) dans les motifs de recherche, à ne pas confondre avec le Globbing

- `*` - Correspond à n'importe quels caractères

  - `ls *.txt` - Liste tous les fichiers texte
  - `ls doc*` - Liste tout ce qui commence par "doc"
  - Exemple :
    ```bash
    $ ls
    doc1.txt document.pdf docx.doc resume.txt
    $ ls doc*
    doc1.txt document.pdf docx.doc
    ```

- `?` - Correspond à un seul caractère

  - `ls fichier?.txt` - Correspond à fichier1.txt, fichierA.txt, mais pas fichier10.txt
  - Exemple :
    ```bash
    $ ls
    fichier1.txt fichierA.txt fichier10.txt
    $ ls fichier?.txt
    fichier1.txt fichierA.txt
    ```

- `[]` - Correspond à n'importe quel caractère entre crochets
  - `ls [abc]*.txt` - Fichiers commençant par a, b, ou c
  - Exemple :
    ```bash
    $ ls
    pomme.txt banane.txt carotte.txt chien.txt
    $ ls [abc]*.txt
    pomme.txt banane.txt carotte.txt
    ```
- `[! ]` - (Négation) Correspond à n'importe quel caractère sauf ceux entre crochets

  - `ls fichier[!1].txt` - Correspond à fichier2.txt, fichierA.txt, mais pas fichier1.txt
  - Exemple :
    ```bash
    $ ls
    fichier1.txt fichier2.txt fichierA.txt
    $ ls fichier[!1].txt
    fichier2.txt fichierA.txt
    ```

- `{}` - Correspond à n'importe lequel des motifs séparés par des virgules entre accolades

  - `ls fichier{1,2,3}.txt` - Correspond à fichier1.txt, fichier2.txt, fichier3.txt
  - Exemple :
    ```bash
    $ ls fichier{1,2,3}.txt
    fichier1.txt fichier2.txt fichier3.txt
    ```

### Exemples d'Utilisation :

```bash
ls *.txt       # Correspond à tous les fichiers .txt
ls fichier?.txt   # Correspond à fichier1.txt, fichierA.txt, etc.
ls fichier[1-3].txt # Correspond à fichier1.txt, fichier2.txt, fichier3.txt
ls fichier[!1].txt  # Correspond à fichier2.txt, fichierA.txt, mais pas fichier1.txt
ls fichier{1,2,3}.txt # Correspond à fichier1.txt, fichier2.txt, fichier3.txt
```

## Conseils :

0. Utiliser `sudo` pour exécuter une commande en tant que super utilisateur
1. Utiliser la touche Tab pour l'auto-complétion
2. Utiliser les flèches haut/bas pour voir l'historique des commandes
3. Utiliser la commande `history` pour voir toutes les commandes précédentes
4. Utiliser la commande `man` quand vous avez besoin de connaître la syntaxe d'une commande (Exemple : `man ls`)
5. Pour une meilleure alternative à `man` pour usage personnel, installer et utiliser `tldr` (Exemple : `tldr ls`)
6. Utiliser l'IA (Exemple : chatgpt) Si vous ne comprenez pas une commande, demandez simplement à chatgpt ou une autre IA, ou exécutez-la dans le terminal et observez la différence
