#include <pthread.h>
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>

void* greetFrom(void* arg) {
    printf("hello from %s\n", (char*)arg);
    printf("exiting %s\n", (char*)arg);
    pthread_exit(0);
}
void* greetFromAndCreateThread(void* arg) {
    printf("hello from %s\n\n", (char*)arg);
    pthread_t th3;

    pthread_create(&th3, NULL, greetFrom, "C");
    printf("waiting for %s\n", "C");
    pthread_join(th3, NULL);
    printf("joined %s\n\n", "C");
    printf("exiting %s\n", (char*)arg);

    pthread_exit(0);
}

int main() {
    pthread_t th1, th2;

    pthread_create(&th1, NULL, greetFrom, "A");
    printf("waiting for %s\n", "A");
    pthread_join(th1, NULL);
    printf("joined %s\n\n", "A");

    pthread_create(&th2, NULL, greetFromAndCreateThread, "B");
    printf("waiting for %s\n", "B");
    pthread_join(th2, NULL);
    printf("joined %s\n\n", "B");

    printf("exiting main\n");
    pthread_exit(0);
}
